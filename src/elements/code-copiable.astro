---
import { useLang } from '@/i18n'

const t = useLang(Astro.url)
---

<div class="code-wrapper">
  <div class="code-copy__success hidden">{t('ui.code-copied')}</div>
  <div class="code-copy">
    <img class="code-copy__icon" src="/assets/copy.svg" alt="copy code" />
  </div>
  <pre class="code-copy__content astro-code github-dark">
    <slot />
  </pre>
</div>

<style lang="scss">
  .code-wrapper {
    position: relative;

    .code-copy {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;

      display: flex;
      justify-content: center;
      align-items: center;
      width: 2rem;
      height: 2rem;

      background-color: var(--color-white);
      border-radius: 0.25rem;

      cursor: pointer;
      user-select: none;

      &:hover {
        background-color: var(--color-gray-light-4);
      }

      &:active {
        background-color: var(--color-gray-light-3);
      }

      &__icon {
        margin: 0;
        width: 1.25rem;
        height: 1.25rem;
      }

      &__success {
        position: absolute;
        top: -1.75rem;
        right: 0.5rem;
        padding: 0.25rem 0.5rem;

        font-size: 0.875rem;
        background-color: var(--color-white);
        border-radius: 0.25rem;
        border: 1px solid var(--color-black);

        &.hidden {
          display: none;
        }
      }
    }

    .code-copy__content {
      background-color: #24292e;
      color: #e1e4e8;
      overflow-x: auto;
    }
  }
</style>
